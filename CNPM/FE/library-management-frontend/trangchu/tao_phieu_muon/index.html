<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo phiếu mượn - Hệ thống quản lý thư viện</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="d-flex flex-column min-vh-100" id="studentSection">
        <!-- Header với logo trường -->
        <header class="bg-white border-bottom py-2">
            <div class="container-fluid">
                <div class="d-flex align-items-center justify-content-between">
                    <div class="d-flex align-items-center">
                        <img src="../Logo_PTIT_University.png" alt="Logo trường" class="logo-header">
                        <div class="ms-3">
                            <h5 class="mb-0 text-primary fw-bold">Học viện Công nghệ Bưu Chính Viễn Thông</h5>
                            <small class="text-muted">Bộ Khoa học và Công nghệ</small>
                        </div>
                    </div>
                    <div>
                        <a href="../../dangnhap/index.html" class="btn btn-outline-danger btn-sm">
                            <i class="fas fa-sign-out-alt me-1"></i>Đăng xuất
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main content container -->
        <div class="d-flex flex-grow-1">
            <!-- Sidebar -->
            <nav class="sidebar bg-dark text-white py-3">
                <div class="sidebar-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../index.html">
                                <i class="fas fa-home me-2"></i> Trang chủ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active text-white" href="index.html">
                                <i class="fas fa-file-alt me-2"></i> Tạo phiếu mượn
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../quan_ly_hoc_sinh/index.html">
                                <i class="fas fa-user-graduate me-2"></i> Quản lý học sinh
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../quan_ly_sach/index.html">
                                <i class="fas fa-book me-2"></i> Quản lý sách
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../quan_ly_nhan_vien/index.html">
                                <i class="fas fa-users me-2"></i> Quản lý nhân viên
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Main content -->
            <main class="flex-grow-1 bg-light p-4">
                <h2 class="mb-4">Tìm học sinh</h2>
                
                <!-- Search bar -->
                <div class="mb-4">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="input-group">
                                <span class="input-group-text bg-white">
                                    <i class="fas fa-search text-muted"></i>
                                </span>
                                <input type="text" class="form-control" id="searchInput" placeholder="Nhập email để tìm kiếm" aria-label="Search">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Students table -->
                <div class="table-responsive bg-white shadow-sm">
                    <table class="table table-hover mb-0">
                        <thead class="table-success">
                            <tr>
                                <th>Mã học sinh</th>
                                <th>Email</th>
                                <th>Họ</th>
                                <th>Tên</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <tr>
                                <td>8</td>
                                <td>duongnguyen@gmail.com</td>
                                <td>Nguyen</td>
                                <td>Duong</td>
                                <td>
                                    <button class="btn btn-outline-primary btn-sm create-loan-btn" data-student-id="8" data-student-name="Nguyen Duong" data-student-email="duongnguyen@gmail.com">Tạo phiếu mượn</button>
                                </td>
                            </tr>
                            <tr>
                                <td>23</td>
                                <td>hihilove1@gmail.com</td>
                                <td>Huan</td>
                                <td>Minh</td>
                                <td>
                                    <button class="btn btn-outline-primary btn-sm create-loan-btn" data-student-id="23" data-student-name="Huan Minh" data-student-email="hihilove1@gmail.com">Tạo phiếu mượn</button>
                                </td>
                            </tr>
                            <tr>
                                <td>43</td>
                                <td>1951012034huan@ou.edu.vn</td>
                                <td>Hoang</td>
                                <td>Huan</td>
                                <td>
                                    <button class="btn btn-outline-primary btn-sm create-loan-btn" data-student-id="43" data-student-name="Hoang Huan" data-student-email="1951012034huan@ou.edu.vn">Tạo phiếu mượn</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Thông báo khi không tìm thấy học sinh -->
                <div id="noResultMessage" class="alert alert-info mt-3 d-none">
                    Không tìm thấy học sinh nào phù hợp với từ khóa tìm kiếm.
                </div>
            </main>
        </div>
    </div>

    <!-- Phần tìm sách - ban đầu ẩn -->
    <div class="d-flex flex-column min-vh-100 d-none" id="bookSection">
        <!-- Header giữ nguyên -->
        <header class="bg-white border-bottom py-2">
            <div class="container-fluid">
                <div class="d-flex align-items-center justify-content-between">
                    <div class="d-flex align-items-center">
                        <img src="../Logo_PTIT_University.png" alt="Logo trường" class="logo-header">
                        <div class="ms-3">
                            <h5 class="mb-0 text-primary fw-bold">Học viện Công nghệ Bưu Chính Viễn Thông</h5>
                            <small class="text-muted">Bộ Khoa học và Công nghệ</small>
                        </div>
                    </div>
                    <div>
                        <a href="../../dangnhap/index.html" class="btn btn-outline-danger btn-sm">
                            <i class="fas fa-sign-out-alt me-1"></i>Đăng xuất
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main content container -->
        <div class="d-flex flex-grow-1">
            <!-- Sidebar giữ nguyên -->
            <nav class="sidebar bg-dark text-white py-3">
                <div class="sidebar-sticky">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../index.html">
                                <i class="fas fa-home me-2"></i> Trang chủ
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active text-white" href="index.html">
                                <i class="fas fa-file-alt me-2"></i> Tạo phiếu mượn
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../quan_ly_hoc_sinh/index.html">
                                <i class="fas fa-user-graduate me-2"></i> Quản lý học sinh
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../quan_ly_sach/index.html">
                                <i class="fas fa-book me-2"></i> Quản lý sách
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="../quan_ly_nhan_vien/index.html">
                                <i class="fas fa-users me-2"></i> Quản lý nhân viên
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Phần nội dung tìm sách -->
            <main class="flex-grow-1 bg-light p-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>Tìm sách</h2>
                    <button id="backToStudentBtn" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-left me-2"></i>Quay lại
                    </button>
                </div>

                <!-- Thông tin học sinh đã chọn -->
                <div class="card mb-4 shadow-sm d-none" id="selectedStudentSection">
                    <div class="card-body">
                        <h5 class="card-title">Thông tin học sinh</h5>
                        <div id="selectedStudentInfo">
                            <!-- Thông tin học sinh sẽ được thêm vào đây bằng JavaScript -->
                        </div>
                    </div>
                </div>
                
                <!-- Thanh tìm kiếm sách -->
                <div class="mb-4">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="input-group">
                                <span class="input-group-text bg-white">
                                    <i class="fas fa-search text-muted"></i>
                                </span>
                                <input type="text" class="form-control" id="bookSearchInput" placeholder="Tìm kiếm sách..." aria-label="Search">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Books table -->
                <div class="table-responsive bg-white shadow-sm">
                    <table class="table table-hover mb-0">
                        <thead class="table-success">
                            <tr>
                                <th>Tiêu đề</th>
                                <th>Mô tả</th>
                                <th>Thể loại</th>
                                <th>Tác giả</th>
                                <th>Ảnh bìa</th>
                                <th>Ngày xuất bản</th>
                                <th>Số lượng</th>
                                <th>Hành động</th>
                            </tr>
                        </thead>
                        <tbody id="booksTableBody">
                        </tbody>
                    </table>
                </div>
                
                <!-- Thông báo khi không tìm thấy sách -->
                <div id="noBookResultMessage" class="alert alert-info mt-3 d-none">
                    Không tìm thấy sách nào phù hợp với từ khóa tìm kiếm.
                </div>
                
                <!-- Danh sách sách đã chọn - ban đầu ẩn -->
                <div class="mt-4 d-none" id="selectedBooksSection">
                    <h4>Sách đã chọn</h4>
                    <div class="table-responsive bg-white shadow-sm">
                        <table class="table table-hover mb-0">
                            <thead class="table-info">
                                <tr>
                                    <th>ID</th>
                                    <th>Tiêu đề</th>
                                    <th>Tác giả</th>
                                    <th>Hành động</th>
                                </tr>
                            </thead>
                            <tbody id="selectedBooksTableBody">
                                <!-- Danh sách sách đã chọn sẽ được thêm vào đây bằng JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Phần xác nhận tạo phiếu mượn - ban đầu ẩn -->
                <div class="mt-4 d-none" id="submitSection">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h5 class="card-title">Thông tin phiếu mượn</h5>
                            
                            <div class="row g-3 mt-2">
                                <div class="col-md-6">
                                    <label for="borrowDate" class="form-label">Ngày mượn</label>
                                    <input type="date" class="form-control" id="borrowDate">
                                </div>
                                <div class="col-md-6">
                                    <label for="returnDate" class="form-label">Ngày trả (dự kiến)</label>
                                    <input type="date" class="form-control" id="returnDate">
                                </div>
                                <div class="col-12">
                                    <label for="loanNote" class="form-label">Ghi chú</label>
                                    <textarea class="form-control" id="loanNote" rows="2"></textarea>
                                </div>
                            </div>
                            
                            <div class="text-end mt-3">
                                <button id="changeStudentBtn" class="btn btn-outline-secondary me-2">
                                    <i class="fas fa-user-edit me-1"></i>Đổi học sinh
                                </button>
                                <button id="createLoanBtn" class="btn btn-primary">
                                    <i class="fas fa-check me-1"></i>Tạo phiếu mượn
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="event.js"></script>
</body>
</html> 